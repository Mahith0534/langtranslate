<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Processing App</title>
</head>
<body>
    <h1>Text Processing App</h1>

    <h2>OCR from Image</h2>
    <input type="file" id="ocr-image">
    <button onclick="ocrFromImage()">Upload and OCR</button>
    <p id="ocr-result"></p>

    <h2>Speech to Text</h2>
    <input type="file" id="speech-audio">
    <button onclick="speechToText()">Upload and Convert</button>
    <p id="speech-result"></p>

    <h2>Text to Speech</h2>
    <textarea id="tts-text" rows="4" cols="50"></textarea>
    <button onclick="textToSpeech()">Convert to Speech</button>
    <p id="tts-result"></p>

    <h2>DOCX to Text</h2>
    <input type="file" id="docx-file">
    <button onclick="docxToText()">Upload and Convert</button>
    <p id="docx-result"></p>

    <h2>PDF to Text</h2>
    <input type="file" id="pdf-file">
    <button onclick="pdfToText()">Upload and Convert</button>
    <p id="pdf-result"></p>

    <h2>Translate Text</h2>
    <textarea id="translate-text" rows="4" cols="50"></textarea>
    <input type="text" id="src-lang" placeholder="Source Language (e.g., en)">
    <input type="text" id="dest-lang" placeholder="Destination Language (e.g., es)">
    <button onclick="translateText()">Translate</button>
    <p id="translate-result"></p>

    <script>
        async function ocrFromImage() {
            const fileInput = document.getElementById('ocr-image');
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('image', file);

            const response = await fetch('/ocr', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            document.getElementById('ocr-result').textContent = result.text;
        }

        async function speechToText() {
            const fileInput = document.getElementById('speech-audio');
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('audio', file);

            const response = await fetch('/speech-to-text', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            document.getElementById('speech-result').textContent = result.text;
        }

        async function textToSpeech() {
            const text = document.getElementById('tts-text').value;
            const response = await fetch('/text-to-speech', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text })
            });
            const result = await response.json();
            document.getElementById('tts-result').textContent = result.message;
        }

        async function docxToText() {
            const fileInput = document.getElementById('docx-file');
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('document', file);

            const response = await fetch('/docx-to-text', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            document.getElementById('docx-result').textContent = result.text;
        }

        async function pdfToText() {
            const fileInput = document.getElementById('pdf-file');
            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append('document', file);

            const response = await fetch('/pdf-to-text', {
                method: 'POST',
                body: formData
            });
            const result = await response.json();
            document.getElementById('pdf-result').textContent = result.text;
        }

        async function translateText() {
            const text = document.getElementById('translate-text').value;
            const srcLang = document.getElementById('src-lang').value;
            const destLang = document.getElementById('dest-lang').value;

            const response = await fetch('/translate', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: text, src_lang: srcLang, dest_lang: destLang })
            });
            const result = await response.json();
            document.getElementById('translate-result').textContent = result.translated_text;
        }
    </script>
</body>
</html>
